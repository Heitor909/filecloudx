{% extends 'base.html' %}
{% block body %}
<section class="hero">
  <h1>Armazene seus arquivos com segurança</h1>
  <p>Faça upload, compartilhe e acesse de qualquer lugar.</p>
  {% if user %}
  <div class="upload-card">
    <form id="uploadForm" action="{{ url_for('upload') }}" method="post" enctype="multipart/form-data">
      <input id="fileInput" type="file" name="file" required>
      <button class="btn primary" type="submit">Enviar arquivo</button>
      <progress id="progress" value="0" max="100" style="display:none"></progress>
    </form>
  </div>
  {% else %}
  <p><a class="btn primary" href="{{ url_for('login') }}">Entre para enviar arquivos</a></p>
  {% endif %}
</section>

<section class="list">
  <h3>Últimos arquivos</h3>
  <ul class="files">
  {% for f in files %}
    <li class="fileitem">
      <div class="name"><a href="{{ url_for('download', fid=f['id']) }}">{{ f['filename'] }}</a></div>
      <div class="meta">por {{ f['owner'] }}</div>
    </li>
  {% endfor %}
  </ul>
</section>
{% endblock %}
